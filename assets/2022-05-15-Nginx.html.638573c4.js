import{_ as e,o as a,c as n,a as i}from"./app.6dda54b5.js";var r="/img/in-post/Nginx1.png",d="/img/in-post/Nginx_upstream1.png",h="/img/in-post/Nginx_upstream2.png",s="/img/in-post/Nginx_upstream3.png",l="/img/in-post/Nginx_upstream4.png";const c={},o=i('<p>\u5728\u6784\u5EFA\u9AD8\u53EF\u7528\u6027\u548C\u9AD8\u6027\u80FD\u7684Web\u5E94\u7528\u7A0B\u5E8F\u65F6\uFF0C\u8D1F\u8F7D\u5747\u8861\u662F\u81F3\u5173\u91CD\u8981\u7684\u4E00\u73AF\u3002Nginx\u4F5C\u4E3A\u4E00\u6B3E\u9AD8\u6027\u80FD\u7684\u5F00\u6E90Web\u670D\u52A1\u5668\uFF0C\u4E5F\u662F\u4E00\u79CD\u4F18\u79C0\u7684\u8D1F\u8F7D\u5747\u8861\u89E3\u51B3\u65B9\u6848\u3002</p><h2 id="\u4E3A\u4EC0\u4E48\u9009\u62E9nginx\u8D1F\u8F7D\u5747\u8861" tabindex="-1"><a class="header-anchor" href="#\u4E3A\u4EC0\u4E48\u9009\u62E9nginx\u8D1F\u8F7D\u5747\u8861" aria-hidden="true">#</a> \u4E3A\u4EC0\u4E48\u9009\u62E9Nginx\u8D1F\u8F7D\u5747\u8861</h2><p>Nginx\u4F5C\u4E3A\u4E00\u4E2A\u8F7B\u91CF\u7EA7\u3001\u9AD8\u6027\u80FD\u7684Web\u670D\u52A1\u5668\uFF0C\u5177\u6709\u51FA\u8272\u7684\u8D1F\u8F7D\u5747\u8861\u529F\u80FD\u3002\u901A\u8FC7Nginx\u7684\u8D1F\u8F7D\u5747\u8861\u914D\u7F6E\uFF0C\u53EF\u4EE5\u5B9E\u73B0\u8BF7\u6C42\u7684\u5206\u53D1\uFF0C\u63D0\u9AD8\u7CFB\u7EDF\u7684\u541E\u5410\u91CF\u548C\u54CD\u5E94\u901F\u5EA6\u3002\u6B64\u5916\uFF0CNginx\u8FD8\u652F\u6301\u591A\u79CD\u8D1F\u8F7D\u5747\u8861\u7B97\u6CD5\uFF0C\u5982\u8F6E\u8BE2\u3001\u52A0\u6743\u8F6E\u8BE2\u3001IP\u54C8\u5E0C\u7B49\uFF0C\u53EF\u4EE5\u6839\u636E\u5B9E\u9645\u9700\u6C42\u9009\u62E9\u5408\u9002\u7684\u7B97\u6CD5\u3002</p><h2 id="\u5178\u578B\u8D1F\u8F7D\u5747\u8861" tabindex="-1"><a class="header-anchor" href="#\u5178\u578B\u8D1F\u8F7D\u5747\u8861" aria-hidden="true">#</a> \u5178\u578B\u8D1F\u8F7D\u5747\u8861</h2><p><img src="'+r+'" alt="Nginx"> \u8D1F\u8F7D\u5747\u8861\u7684\u6838\u5FC3\u95EE\u9898\u662F\uFF1A\u662F\u5982\u4F55\u628A\u5BA2\u6237\u7AEF\u7684\u8BBF\u95EE\uFF0C\u66F4\u597D\u7684\u65B9\u5F0F\u5206\u914D\u5230\u540E\u7AEF\u670D\u52A1\u5668</p><h2 id="\u8F6E\u8BE2-round-robin" tabindex="-1"><a class="header-anchor" href="#\u8F6E\u8BE2-round-robin" aria-hidden="true">#</a> \u8F6E\u8BE2(Round Robin)</h2><p><img src="'+d+`" alt="Nginx"> \u8FD9\u662F\u6700\u7B80\u5355\u548C\u6700\u5E38\u89C1\u7684\u8D1F\u8F7D\u5747\u8861\u65B9\u6CD5\u3002Nginx\u4F1A\u6309\u7167\u987A\u5E8F\u5C06\u8BF7\u6C42\u5206\u53D1\u7ED9\u6BCF\u4E2A\u540E\u7AEF\u670D\u52A1\u5668\uFF0C\u4F9D\u6B21\u5FAA\u73AF\u3002</p><h3 id="\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#\u539F\u7406" aria-hidden="true">#</a> \u539F\u7406</h3><ol><li>\u5BA2\u6237\u7AEF\u53D1\u8D77\u4E00\u4E2A\u8BF7\u6C42\u5230Nginx</li><li>Nginx\u6309\u7167\u5B9A\u4E49\u7684\u670D\u52A1\u5668\u5217\u8868\u987A\u5E8F\uFF0C\u5C06\u8BF7\u6C42\u53D1\u9001\u7ED9\u4E0B\u4E00\u4E2A\u670D\u52A1\u5668</li><li>\u4E0B\u4E00\u4E2A\u8BF7\u6C42\u5C06\u53D1\u9001\u5230\u5217\u8868\u4E2D\u7684\u4E0B\u4E00\u4E2A\u670D\u52A1\u5668</li><li>\u4EE5\u6B64\u7C7B\u63A8\uFF0C\u76F4\u5230\u6240\u6709\u670D\u52A1\u5668\u90FD\u63A5\u6536\u5230\u4E86\u8BF7\u6C42</li><li>\u5F53\u518D\u6B21\u6536\u5230\u65B0\u8BF7\u6C42\u65F6\uFF0CNginx\u91CD\u65B0\u4ECE\u5217\u8868\u7684\u7B2C\u4E00\u4E2A\u670D\u52A1\u5668\u5F00\u59CB</li></ol><h3 id="\u914D\u7F6E\u793A\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u914D\u7F6E\u793A\u4F8B" aria-hidden="true">#</a> \u914D\u7F6E\u793A\u4F8B</h3><div class="language-conf ext-conf"><pre class="language-conf"><code>upstream backend {
    server backend1.example.com;
    server backend2.example.com;
}

server {
    location / {
        proxy_pass http://backend;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
</code></pre></div><h3 id="\u9002\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#\u9002\u7528\u573A\u666F" aria-hidden="true">#</a> \u9002\u7528\u573A\u666F</h3><ul><li>\u540E\u7AEF\u670D\u52A1\u5668\u6027\u80FD\u76F8\u4F3C\uFF0C\u80FD\u591F\u5E73\u5747\u5904\u7406\u8BF7\u6C42\u7684\u573A\u666F</li><li>\u5927\u591A\u6570\u57FA\u672C\u7684Web\u5E94\u7528\u548C\u670D\u52A1\u3002</li></ul><h2 id="\u52A0\u6743\u8F6E\u8BE2-weighted-load-balancing" tabindex="-1"><a class="header-anchor" href="#\u52A0\u6743\u8F6E\u8BE2-weighted-load-balancing" aria-hidden="true">#</a> \u52A0\u6743\u8F6E\u8BE2(Weighted Load Balancing)</h2><p><img src="`+h+`" alt="Nginx"> \u8FD9\u79CD\u65B9\u6CD5\u5141\u8BB8\u4E3A\u6BCF\u4E2A\u540E\u7AEF\u670D\u52A1\u5668\u5206\u914D\u4E00\u4E2A\u6743\u91CD\uFF0C\u4EE5\u4FBF\u6839\u636E\u670D\u52A1\u5668\u7684\u5904\u7406\u80FD\u529B\u5206\u914D\u8D1F\u8F7D\u3002</p><h3 id="\u539F\u7406-1" tabindex="-1"><a class="header-anchor" href="#\u539F\u7406-1" aria-hidden="true">#</a> \u539F\u7406</h3><ol><li>\u6BCF\u53F0\u540E\u7AEF\u670D\u52A1\u5668\u90FD\u88AB\u8D4B\u4E88\u4E00\u4E2A\u6743\u91CD\u503C\uFF0C\u901A\u5E38\u901A\u8FC7\u914D\u7F6E\u6587\u4EF6\u8FDB\u884C\u8BBE\u7F6E\uFF1B</li><li>Nginx\u5728\u5904\u7406\u8BF7\u6C42\u65F6\uFF0C\u6309\u7167\u670D\u52A1\u5668\u7684\u6743\u91CD\u6BD4\u4F8B\u6765\u5206\u914D\u8BF7\u6C42\uFF1B</li><li>\u6743\u91CD\u8D8A\u9AD8\u7684\u670D\u52A1\u5668\uFF0C\u4F1A\u63A5\u6536\u5230\u66F4\u591A\u7684\u8BF7\u6C42\u3002</li></ol><h3 id="\u914D\u7F6E\u793A\u4F8B-1" tabindex="-1"><a class="header-anchor" href="#\u914D\u7F6E\u793A\u4F8B-1" aria-hidden="true">#</a> \u914D\u7F6E\u793A\u4F8B</h3><div class="language-conf ext-conf"><pre class="language-conf"><code>upstream backend {
    server backend1.example.com weight=3;
    server backend2.example.com weight=1;
}

server {
    location / {
        proxy_pass http://backend;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
</code></pre></div><h3 id="\u9002\u7528\u573A\u666F-1" tabindex="-1"><a class="header-anchor" href="#\u9002\u7528\u573A\u666F-1" aria-hidden="true">#</a> \u9002\u7528\u573A\u666F</h3><ul><li>\u5E73\u8861\u670D\u52A1\u5668\u7684\u8D1F\u8F7D\uFF0C\u786E\u4FDD\u6027\u80FD\u8F83\u9AD8\u7684\u670D\u52A1\u5668\u627F\u62C5\u66F4\u591A\u7684\u8BF7\u6C42\uFF0C\u4ECE\u800C\u63D0\u9AD8\u6574\u4F53\u7CFB\u7EDF\u7684\u6548\u7387\u548C\u53EF\u7528\u6027\u3002</li></ul><h2 id="ip\u54C8\u5E0C-ip-hash" tabindex="-1"><a class="header-anchor" href="#ip\u54C8\u5E0C-ip-hash" aria-hidden="true">#</a> IP\u54C8\u5E0C(IP Hash)</h2><p><img src="`+s+`" alt="Nginx"> \u8FD9\u79CD\u65B9\u6CD5\u4F1A\u6839\u636E\u5BA2\u6237\u7AEF\u7684IP\u5730\u5740\u5C06\u8BF7\u6C42\u53D1\u9001\u5230\u540C\u4E00\u4E2A\u540E\u7AEF\u670D\u52A1\u5668\uFF0C\u8FD9\u6837\u53EF\u4EE5\u4FDD\u8BC1\u540C\u4E00\u5BA2\u6237\u7AEF\u7684\u8BF7\u6C42\u90FD\u4F1A\u88AB\u53D1\u9001\u5230\u540C\u4E00\u53F0\u670D\u52A1\u5668\u4E0A\u3002</p><h3 id="\u539F\u7406-2" tabindex="-1"><a class="header-anchor" href="#\u539F\u7406-2" aria-hidden="true">#</a> \u539F\u7406</h3><ol><li>\u5BA2\u6237\u7AEF\u53D1\u9001\u8BF7\u6C42\u5230Nginx\u670D\u52A1\u5668\uFF0CNginx\u4ECE\u5BA2\u6237\u7AEF\u7684IP\u5730\u5740\uFF0C\u8BA1\u7B97\u51FA\u4E00\u4E2A\u54C8\u5E0C\u503C</li><li>\u6839\u636E\u8FD9\u4E2A\u54C8\u5E0C\u503C\uFF0C\u9009\u62E9\u4E00\u53F0\u540E\u7AEF\u670D\u52A1\u5668\u6765\u5904\u7406\u8BF7\u6C42</li><li>\u540C\u4E00\u4E2A\u5BA2\u6237\u7AEF\u7684\u540E\u7EED\u8BF7\u6C42\uFF0C\u4F1A\u6839\u636E\u76F8\u540C\u7684\u54C8\u5E0C\u503C\u9009\u62E9\u76F8\u540C\u7684\u540E\u7AEF\u670D\u52A1\u5668\uFF0C\u4EE5\u4FDD\u6301\u4F1A\u8BDD\u7684\u4E00\u81F4\u6027\u3002</li></ol><h3 id="\u914D\u7F6E\u793A\u4F8B-2" tabindex="-1"><a class="header-anchor" href="#\u914D\u7F6E\u793A\u4F8B-2" aria-hidden="true">#</a> \u914D\u7F6E\u793A\u4F8B</h3><div class="language-conf ext-conf"><pre class="language-conf"><code>upstream backend {
    ip_hash;
    server backend1.example.com;
    server backend2.example.com;
}

server {
    location / {
        proxy_pass http://backend;
    }
}

</code></pre></div><h3 id="\u9002\u7528\u573A\u666F-2" tabindex="-1"><a class="header-anchor" href="#\u9002\u7528\u573A\u666F-2" aria-hidden="true">#</a> \u9002\u7528\u573A\u666F</h3><ul><li>\u9700\u8981\u786E\u4FDD\u4E0E\u5BA2\u6237\u7AEF\u76F8\u5173\u8054\u7684\u4F1A\u8BDD\u6570\u636E\u3001\u6216\u72B6\u6001\u4FE1\u606F\uFF0C\u5728\u540C\u4E00\u53F0\u670D\u52A1\u5668\u4E0A\u5904\u7406\u7684\u60C5\u51B5\uFF0C\u4F8B\u5982\uFF1A\u7F51\u7AD9\u7684\u767B\u5F55\u72B6\u6001\u3001\u6216\u8D2D\u7269\u8F66\u4FE1\u606F\u7B49\u3002</li></ul><h2 id="\u6700\u5C11\u8FDE\u63A5-least-connections" tabindex="-1"><a class="header-anchor" href="#\u6700\u5C11\u8FDE\u63A5-least-connections" aria-hidden="true">#</a> \u6700\u5C11\u8FDE\u63A5(Least Connections)</h2><p><img src="`+l+`" alt="Nginx"> Nginx\u4F1A\u5C06\u8BF7\u6C42\u53D1\u9001\u5230\u5F53\u524D\u8FDE\u63A5\u6570\u6700\u5C11\u7684\u540E\u7AEF\u670D\u52A1\u5668\u4E0A\uFF0C\u4EE5\u5B9E\u73B0\u8D1F\u8F7D\u5747\u8861\u3002</p><h3 id="\u539F\u7406-3" tabindex="-1"><a class="header-anchor" href="#\u539F\u7406-3" aria-hidden="true">#</a> \u539F\u7406</h3><ol><li>\u5F53\u65B0\u7684\u8BF7\u6C42\u5230\u8FBE\u65F6\uFF0CNginx\u4F1A\u68C0\u67E5\u5F53\u524D\u6240\u6709\u540E\u7AEF\u670D\u52A1\u5668\u7684\u8FDE\u63A5\u6570</li><li>\u9009\u62E9\u5F53\u524D\u8FDE\u63A5\u6570\u6700\u5C11\u7684\u90A3\u53F0\u670D\u52A1\u5668\u5904\u7406\u65B0\u7684\u8BF7\u6C42</li></ol><h3 id="\u914D\u7F6E\u793A\u4F8B-3" tabindex="-1"><a class="header-anchor" href="#\u914D\u7F6E\u793A\u4F8B-3" aria-hidden="true">#</a> \u914D\u7F6E\u793A\u4F8B</h3><div class="language-conf ext-conf"><pre class="language-conf"><code>upstream backend {
    least_conn;
    server backend1.example.com;
    server backend2.example.com;
}

server {
    location / {
        proxy_pass http://backend;
    }
}

</code></pre></div><h3 id="\u9002\u7528\u573A\u666F-3" tabindex="-1"><a class="header-anchor" href="#\u9002\u7528\u573A\u666F-3" aria-hidden="true">#</a> \u9002\u7528\u573A\u666F</h3><ul><li>\u9002\u7528\u4E8E\u52A8\u6001\u8D1F\u8F7D\u5747\u8861\u7684\u573A\u666F\uFF0C\u6BD4\u5982\uFF1A\u6839\u636E\u5B9E\u65F6\u8FDE\u63A5\u6570\u52A8\u6001\u8C03\u6574\u8BF7\u6C42\u5206\u53D1\uFF0C\u786E\u4FDD\u6BCF\u4E2A\u670D\u52A1\u5668\u7684\u8D1F\u8F7D\u5C3D\u53EF\u80FD\u5E73\u8861\u3002</li><li>\u907F\u514D\u51FA\u73B0\u67D0\u4E9B\u670D\u52A1\u5668\u8D1F\u8F7D\u8FC7\u9AD8\uFF0C\u800C\u5176\u4ED6\u670D\u52A1\u5668\u8D1F\u8F7D\u8F83\u8F7B\u7684\u60C5\u51B5\uFF0C\u63D0\u9AD8\u6574\u4F53\u7684\u8D1F\u8F7D\u5747\u8861\u6548\u679C\u3002</li></ul>`,37),t=[o];function p(x,g){return a(),n("div",null,t)}var m=e(c,[["render",p],["__file","2022-05-15-Nginx.html.vue"]]);export{m as default};
